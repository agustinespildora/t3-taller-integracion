(this.webpackJsonpt3=this.webpackJsonpt3||[]).push([[0],{12:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(22),r=c.n(a),i=(c(12),c(17)),o=c.n(i),j=o.a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{transports:["websocket"],path:"/flights"}),l=s.a.createContext(),u=c(24),b=c(2),O=c(85),d=c(89),h=c(86),m=c(87),f=c(88),x=c(3),p=(c.p,c(1));var g=function(){new x.LatLngBounds([-34.82264,-58.533321],[-33.382761,-70.803203]);var e=[{color:"lime"},{color:"red"},{color:"blue"},{color:"orange"},{color:"violet"}],t=Object(n.useContext)(l),c=Object(n.useState)([]),s=Object(b.a)(c,2),a=(s[0],s[1]),r=Object(n.useState)(0),i=Object(b.a)(r,2),o=(i[0],i[1]),j=Object(n.useState)([]),g=Object(b.a)(j,2),v=g[0],S=g[1],N=Object(n.useState)([]),C=Object(b.a)(N,2),k=(C[0],C[1],Object(n.useCallback)((function(e){e.map((function(e){return S((function(t){return[].concat(Object(u.a)(t),[[e.origin,e.destination]])}))})),o(e.length),a(e)}),[]));return Object(n.useEffect)((function(){return t.emit("FLIGHTS",{}),t.on("FLIGHTS",(function(e){return k(e)})),function(){}}),[t,k]),Object(p.jsxs)("div",{children:[Object(p.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",integrity:"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",crossorigin:""}),Object(p.jsx)("script",{src:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",integrity:"sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==",crossorigin:""}),Object(p.jsx)("div",{className:"Map",children:"Mapa en tiempo real"}),Object(p.jsx)("div",{children:Object(p.jsxs)(O.a,{center:[0,0],zoom:1,scrollWheelZoom:!1,children:[Object(p.jsx)(d.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),v.map((function(t,c){return Object(p.jsx)(h.a,{pathOptions:e[c%5],positions:t})})),Object(p.jsx)(m.a,{position:[0,0],children:Object(p.jsxs)(f.a,{children:["A pretty CSS3 popup. ",Object(p.jsx)("br",{})," Easily customizable."]})})]})})]})},v=c(45),S=function(e){var t=e.flight;return Object(p.jsxs)("div",{className:"flight-info",children:[Object(p.jsxs)("p",{children:["Origen: ",t.origin[0],", ",t.origin[1]]}),Object(p.jsxs)("p",{children:["Destino: ",t.destination[0],", ",t.destination[1]]}),Object(p.jsxs)("p",{children:["Aerol\xednea: ",t.airline]}),Object(p.jsx)("p",{children:"Pasajeros:"}),t.passengers.map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("li",{children:["Nombre: ",e.name]}),Object(p.jsxs)("li",{children:["Edad: ",e.age]})]})}))]})},N=function(e){Object(v.a)(e);var t=Object(n.useContext)(l),c=Object(n.useState)([]),s=Object(b.a)(c,2),a=s[0],r=s[1],i=Object(n.useCallback)((function(e){r(e)}),[]);return Object(n.useEffect)((function(){return t.emit("FLIGHTS",{}),t.on("FLIGHTS",(function(e){return i(e)})),function(){}}),[t,i]),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Vuelos"}),Object(p.jsx)("div",{className:"row-container",children:a.map((function(e){return Object(p.jsx)(S,{flight:e})}))})]})},C=(c(83),"CHAT"),k=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=t[0],s=t[1],a=Object(n.useRef)();Object(n.useEffect)((function(){return a.current=o()("http://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights",transports:["websocket"]}),a.current.on(C,(function(e){s((function(t){return[].concat(Object(u.a)(t),[e])}))})),function(){a.current.disconnect()}}),[]);return{messageObjects:c,sendMessageObject:function(e,t){a.current.emit(C,{name:e,message:t})}}},w=function(e){var t=k(),c=t.messageObjects,s=t.sendMessageObject,a=Object(n.useState)(""),r=Object(b.a)(a,2),i=r[0],o=r[1],j="Agust\xedn";return Object(p.jsxs)("div",{className:"chat-room-container",children:[Object(p.jsx)("h4",{className:"room-name",children:"Chat de torre de control"}),Object(p.jsx)("div",{className:"messages-container",children:Object(p.jsx)("ol",{className:"messages-list",children:c.map((function(e,t){return Object(p.jsxs)("li",{className:"message-item ".concat(e.name===j?"my-message":"received-message"),children:[Object(p.jsx)("div",{className:"chat-date",children:(c=e.date,new Date(c).toLocaleString())}),e.name," ",": ",e.message]},t);var c}))})}),Object(p.jsx)("textarea",{value:i,onChange:function(e){o(e.target.value)},placeholder:"Write message...",className:"new-message-input-field"}),Object(p.jsx)("button",{onClick:function(){s(j,i),o("")},className:"send-message-button",children:"Send"})]})};var M=function(){return Object(p.jsx)(l.Provider,{value:j,children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("div",{className:"uno",children:Object(p.jsx)(g,{})}),Object(p.jsx)("div",{className:"dos",children:Object(p.jsx)(w,{})}),Object(p.jsx)("div",{className:"tres",children:Object(p.jsx)(N,{})})]})})};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.74fb7df8.chunk.js.map