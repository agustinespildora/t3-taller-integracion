(this.webpackJsonpt3=this.webpackJsonpt3||[]).push([[0],{14:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(21),i=n.n(a),r=(n(14),n(22)),o=n.n(r),j=o.a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{transports:["websocket"],path:"/flights"}),l=s.a.createContext(),u=n(18),b=n(2),O=n(85),d=n(87),h=n(86),f=n(1);var m=function(){var e={color:"black"},t=[{color:"lime"},{color:"red"},{color:"blue"},{color:"orange"},{color:"violet"}],n=Object(c.useContext)(l),s=Object(c.useState)([]),a=Object(b.a)(s,2),i=(a[0],a[1]),r=Object(c.useState)([]),o=Object(b.a)(r,2),j=o[0],m=o[1],x=Object(c.useState)(0),p=Object(b.a)(x,2),g=(p[0],p[1]),v=Object(c.useState)([]),N=Object(b.a)(v,2),S=N[0],k=N[1],C=Object(c.useCallback)((function(e){e.map((function(e){return k((function(t){return[].concat(Object(u.a)(t),[[e.origin,e.destination]])}))})),g(e.length),i(e)}),[]),w=Object(c.useCallback)((function(e){m((function(t){return[].concat(Object(u.a)(t),[[[e.position[0],e.position[1]],[e.position[0]+1e-8,e.position[1]+1e-9]]])}))}),[]);return Object(c.useEffect)((function(){return n.emit("FLIGHTS",{}),n.on("FLIGHTS",(function(e){return C(e)})),function(){}}),[n,C]),Object(c.useEffect)((function(){return n.emit("POSITION",{}),n.on("POSITION",(function(e){return w(e)})),function(){}}),[n,w]),Object(f.jsxs)("div",{children:[Object(f.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",integrity:"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",crossorigin:""}),Object(f.jsx)("script",{src:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",integrity:"sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==",crossorigin:""}),Object(f.jsx)("div",{className:"Map"}),Object(f.jsx)("h3",{children:"Mapa en tiempo real \ud83d\uddfa\ufe0f"}),Object(f.jsx)("div",{children:Object(f.jsxs)(O.a,{center:[0,0],zoom:1,scrollWheelZoom:!1,children:[Object(f.jsx)(d.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),S.map((function(e,n){return Object(f.jsx)(h.a,{pathOptions:t[n%5],positions:e})})),j.map((function(t,n){return Object(f.jsx)(h.a,{pathOptions:e,positions:t})}))]})})]})},x=n(44),p=function(e){var t=e.flight;return Object(f.jsxs)("div",{className:"flight-info vuelo",children:[Object(f.jsxs)("p",{children:["Vuelo: ",t.code]}),Object(f.jsxs)("p",{children:["Origen: ",t.origin[0],", ",t.origin[1]]}),Object(f.jsxs)("p",{children:["Destino: ",t.destination[0],", ",t.destination[1]]}),Object(f.jsxs)("p",{children:["Aerol\xednea: ",t.airline]}),Object(f.jsxs)("p",{children:["Avi\xf3n: ",t.plane]}),Object(f.jsxs)("p",{children:["Asientos: ",t.seats]}),Object(f.jsx)("p",{children:"Pasajeros:"}),t.passengers.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsxs)("li",{children:["Nombre: ",e.name]}),Object(f.jsxs)("li",{children:["Edad: ",e.age]})]})}))]})},g=function(e){Object(x.a)(e);var t=Object(c.useContext)(l),n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],i=s[1],r=Object(c.useCallback)((function(e){i(e)}),[]);return Object(c.useEffect)((function(){return t.emit("FLIGHTS",{}),t.on("FLIGHTS",(function(e){return r(e)})),function(){}}),[t,r]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Vuelos \ud83d\udeeb"}),Object(f.jsx)("h4",{className:"align-right",children:"scroll \ud83d\udc47"}),Object(f.jsx)("div",{className:"row-container fights",children:a.map((function(e){return Object(f.jsx)(p,{flight:e})}))})]})},v=(n(81),"CHAT"),N=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],s=t[1],a=Object(c.useRef)();Object(c.useEffect)((function(){return a.current=o()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights",transports:["websocket"]}),a.current.on(v,(function(e){s((function(t){return[].concat(Object(u.a)(t),[e])}))})),function(){a.current.disconnect()}}),[]);return{messageObjects:n,sendMessageObject:function(e,t){a.current.emit(v,{name:e,message:t})}}},S=function(e){var t=N(),n=t.messageObjects,s=t.sendMessageObject,a=Object(c.useState)(""),i=Object(b.a)(a,2),r=i[0],o=i[1],j=Object(c.useState)(""),l=Object(b.a)(j,2),u=l[0],O=l[1];return Object(f.jsxs)("div",{className:"chat-room-container",children:[Object(f.jsx)("h3",{children:"Chat de torre de control \ud83c\udfe2"}),Object(f.jsx)("div",{className:"messages-container",children:Object(f.jsx)("ol",{className:"messages-list",children:n.map((function(e,t){return Object(f.jsxs)("li",{className:"message-item ".concat(e.name===u?"my-message":"received-message"),children:[Object(f.jsx)("div",{className:"chat-date",children:(n=e.date,new Date(n).toLocaleString())}),e.name," ",": ",e.message]},t);var n}))})}),Object(f.jsx)("textarea",{value:r,onChange:function(e){o(e.target.value)},placeholder:"Escribe un mensaje...",className:"new-message-input-field"}),Object(f.jsx)("h4",{}),Object(f.jsx)("textarea",{title:"Nombre",value:u,onChange:function(e){O(e.target.value)},placeholder:"Elige un nombre",className:"nickname"}),Object(f.jsx)("button",{onClick:function(){s(u,r),o("")},className:"send-message-button",children:"Send"})]})};var k=function(){return Object(f.jsx)(l.Provider,{value:j,children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("div",{className:"uno",children:Object(f.jsx)(m,{})}),Object(f.jsx)("div",{className:"dos",children:Object(f.jsx)(S,{})}),Object(f.jsx)("div",{className:"tres",children:Object(f.jsx)(g,{})})]})})};i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(k,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.64f9e89f.chunk.js.map