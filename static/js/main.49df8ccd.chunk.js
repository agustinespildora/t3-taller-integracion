(this.webpackJsonpt3=this.webpackJsonpt3||[]).push([[0],{14:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(22),i=n.n(a),r=(n(14),n(17)),o=n.n(r),j=o.a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{transports:["websocket"],path:"/flights"}),l=s.a.createContext(),u=n(19),b=n(2),O=n(85),d=n(87),h=n(86),f=n(9),m=n(1);var x=function(){new f.LatLngBounds([-34.82264,-58.533321],[-33.382761,-70.803203]);var e={color:"black"},t=[{color:"lime"},{color:"red"},{color:"blue"},{color:"orange"},{color:"violet"}],n=Object(c.useContext)(l),s=Object(c.useState)([]),a=Object(b.a)(s,2),i=(a[0],a[1]),r=Object(c.useState)([]),o=Object(b.a)(r,2),j=o[0],x=o[1],p=Object(c.useState)(0),g=Object(b.a)(p,2),v=(g[0],g[1]),N=Object(c.useState)([]),S=Object(b.a)(N,2),k=S[0],C=S[1],w=Object(c.useState)([]),M=Object(b.a)(w,2),E=(M[0],M[1],Object(c.useCallback)((function(e){e.map((function(e){return C((function(t){return[].concat(Object(u.a)(t),[[e.origin,e.destination]])}))})),v(e.length),i(e)}),[])),I=Object(c.useCallback)((function(e){x((function(t){return[].concat(Object(u.a)(t),[[[e.position[0],e.position[1]],[e.position[0]+1e-8,e.position[1]+1e-9]]])}))}),[]);return Object(c.useEffect)((function(){return n.emit("FLIGHTS",{}),n.on("FLIGHTS",(function(e){return E(e)})),function(){}}),[n,E]),Object(c.useEffect)((function(){return n.emit("POSITION",{}),n.on("POSITION",(function(e){return I(e)})),function(){}}),[n,I]),Object(m.jsxs)("div",{children:[Object(m.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",integrity:"sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",crossorigin:""}),Object(m.jsx)("script",{src:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",integrity:"sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==",crossorigin:""}),Object(m.jsx)("div",{className:"Map"}),Object(m.jsx)("h3",{children:"Mapa en tiempo real \ud83d\uddfa\ufe0f"}),Object(m.jsx)("div",{children:Object(m.jsxs)(O.a,{center:[0,0],zoom:1,scrollWheelZoom:!1,children:[Object(m.jsx)(d.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),k.map((function(e,n){return Object(m.jsx)(h.a,{pathOptions:t[n%5],positions:e})})),j.map((function(t,n){return Object(m.jsx)(h.a,{pathOptions:e,positions:t})}))]})})]})},p=n(44),g=function(e){var t=e.flight;return Object(m.jsxs)("div",{className:"flight-info vuelo",children:[Object(m.jsxs)("p",{children:["Vuelo: ",t.code]}),Object(m.jsxs)("p",{children:["Origen: ",t.origin[0],", ",t.origin[1]]}),Object(m.jsxs)("p",{children:["Destino: ",t.destination[0],", ",t.destination[1]]}),Object(m.jsxs)("p",{children:["Aerol\xednea: ",t.airline]}),Object(m.jsxs)("p",{children:["Avi\xf3n: ",t.plane]}),Object(m.jsxs)("p",{children:["Asientos: ",t.seats]}),Object(m.jsx)("p",{children:"Pasajeros:"}),t.passengers.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("li",{children:["Nombre: ",e.name]}),Object(m.jsxs)("li",{children:["Edad: ",e.age]})]})}))]})},v=function(e){Object(p.a)(e);var t=Object(c.useContext)(l),n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],i=s[1],r=Object(c.useCallback)((function(e){i(e)}),[]);return Object(c.useEffect)((function(){return t.emit("FLIGHTS",{}),t.on("FLIGHTS",(function(e){return r(e)})),function(){}}),[t,r]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Vuelos \ud83d\udeeb"}),Object(m.jsx)("h4",{className:"align-right",children:"scroll \ud83d\udc47"}),Object(m.jsx)("div",{className:"row-container fights",children:a.map((function(e){return Object(m.jsx)(g,{flight:e})}))})]})},N=(n(81),"CHAT"),S=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],s=t[1],a=Object(c.useRef)();Object(c.useEffect)((function(){return a.current=o()("http://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights",transports:["websocket"]}),a.current.on(N,(function(e){s((function(t){return[].concat(Object(u.a)(t),[e])}))})),function(){a.current.disconnect()}}),[]);return{messageObjects:n,sendMessageObject:function(e,t){a.current.emit(N,{name:e,message:t})}}},k=function(e){var t=S(),n=t.messageObjects,s=t.sendMessageObject,a=Object(c.useState)(""),i=Object(b.a)(a,2),r=i[0],o=i[1],j=Object(c.useState)(""),l=Object(b.a)(j,2),u=l[0],O=l[1];return Object(m.jsxs)("div",{className:"chat-room-container",children:[Object(m.jsx)("h3",{children:"Chat de torre de control \ud83c\udfe2"}),Object(m.jsx)("div",{className:"messages-container",children:Object(m.jsx)("ol",{className:"messages-list",children:n.map((function(e,t){return Object(m.jsxs)("li",{className:"message-item ".concat(e.name===u?"my-message":"received-message"),children:[Object(m.jsx)("div",{className:"chat-date",children:(n=e.date,new Date(n).toLocaleString())}),e.name," ",": ",e.message]},t);var n}))})}),Object(m.jsx)("textarea",{value:r,onChange:function(e){o(e.target.value)},placeholder:"Escribe un mensaje...",className:"new-message-input-field"}),Object(m.jsx)("h4",{}),Object(m.jsx)("textarea",{title:"Nombre",value:u,onChange:function(e){O(e.target.value)},placeholder:"Elige un nombre",className:"nickname"}),Object(m.jsx)("button",{onClick:function(){s(u,r),o("")},className:"send-message-button",children:"Send"})]})};var C=function(){return Object(m.jsx)(l.Provider,{value:j,children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"uno",children:Object(m.jsx)(x,{})}),Object(m.jsx)("div",{className:"dos",children:Object(m.jsx)(k,{})}),Object(m.jsx)("div",{className:"tres",children:Object(m.jsx)(v,{})})]})})};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.49df8ccd.chunk.js.map